---
# Ensure that user-defined headers are included with quotes, so that we can find them
# Don't use "std" namespace
- IncludeToQuotes:
    - __utility.hpp
    - concepts.hpp
    - coroutine.hpp
    - functional.hpp
    - stop_token.hpp
# Rename the namespaces
- NamespaceRename:
    from: "std::execution"
    to: "concore::_p2300::execution"
- NamespaceRename:
    from: "std::this_thread"
    to: "concore::_p2300::this_thread"
- NamespaceRename:
    from: "std"
    to: "concore::_p2300"
# Add "using namespace std" at the beginning of our namespaces
- AddInNamespace:
    add: "using namespace std;"
    in:
      - std
      - std::execution
      - std::this_thread
# Replace "std::XXXX" with "concore::_p2300::XXX" for coroutine functions
- ReplaceTokens:
    to: "concore::_p2300::__await_suspend<"
    tokens:
        - token: id
          text: std
        - token: punct
          text: "::"
        - token: id
          text: __await_suspend
        - token: punct
          text: "<"
- ReplaceTokens:
    to: "concore::_p2300::__get_awaiter("
    tokens:
        - token: id
          text: std
        - token: punct
          text: "::"
        - token: id
          text: __get_awaiter
        - token: punct
          text: "("
- ReplaceTokens:
    to: "concore::_p2300::__as_lvalue("
    tokens:
        - token: id
          text: std
        - token: punct
          text: "::"
        - token: id
          text: __as_lvalue
        - token: punct
          text: "("
# Make __loop::run_loop::__scheduler::__schedule_task constructor public
- SurroundTokens:
    pre: "public:\n          "
    post: ""
    tokens:
      # explicit __schedule_task(run_loop* __loop)
      - token: kwd
        text: explicit
      - token: id
        text: __schedule_task
      - token: punct
        text: "("
      - token: id
        text: run_loop
      - token: punct
        text: "*"
      - token: id
        text: __loop
      - token: punct
        text: ")"
